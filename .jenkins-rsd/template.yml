# Triggers
- trigger:
    name: nightly_and_hook
    triggers:
        - github
        - timed: "@midnight"

- trigger:
    name: pull_request_trigger
    triggers:
        - github-pull-request:
            org-list:
                - UCL-CCS
            admin-list:
                - jenshnielsen
                - jamespjh
                - mdavezac
                - garymacindoe
                - raquel-ucl
                - sinanshi
                - djgroen
                - ghswa
                - mobernabeu
                - rupertnash
                - schmie
                - timmkrueger
            cron: "H/10 * * * *"
            github-hooks: true

# Parameters
- parameter:
    name: sha1
    parameters:
        - string:
            name: sha1
            description: "sha1 of the commit you which to build if building manually."

# A dummy parameter because we cannot have none
- parameter:
    name: dummy
    parameters:
        - bool:
            name: dummy
            default: false
            description: "A dummy parameter"

- builder:
      name: wipe-and-create-build-dir
      builders:
          - shell: |
              cd {workspace_dir}
              if [ -d build ]; then
                rm -rf build
              fi
              mkdir build

- publisher:
    name: 'cpp_unit_tests'
    publishers:
        - xunit:
            test-time-margin: 120000
            types:
                - cppunit:
                    pattern: "build/tests/*.xml"
